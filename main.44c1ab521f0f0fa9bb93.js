(()=>{"use strict";const e="--",n="ðŸ¦",t="ðŸ¤–",r="DRAW",o="one",a={id:"ai",token:t},c={id:"p1",token:n},l={id:"p2",token:"ðŸ¼"},d={easy:3,normal:4,hard:5},i=function(e,n,t){return n.every((n=>{const[r,o]=n;return e[r][o]===t}))};function u(e,n){const t=function(e,n){for(let t=0;t<6;t+=1)for(let r=0;r<4;r+=1){const o=[[t,r],[t,r+1],[t,r+2],[t,r+3]];if(i(e,o,n))return o}return!1}(e,n);if(t)return t;const r=function(e,n){for(let t=0;t<3;t+=1)for(let r=0;r<7;r+=1){const o=[[t,r],[t+1,r],[t+2,r],[t+3,r]];if(i(e,o,n))return o}return!1}(e,n);if(r)return r;const o=function(e,n){for(let t=3;t<6;t+=1)for(let r=0;r<4;r+=1){const o=[[t,r],[t-1,r+1],[t-2,r+2],[t-3,r+3]];if(i(e,o,n))return o}return!1}(e,n);if(o)return o;const a=function(e,n){for(let t=0;t<3;t+=1)for(let r=0;r<4;r+=1){const o=[[t,r],[t+1,r+1],[t+2,r+2],[t+3,r+3]];if(i(e,o,n))return o}return!1}(e,n);return a||!1}const s=function(n){for(const t of n)if(t.includes(e))return!1;return!0},f=function(n){const t=[];for(let r=0;r<7;r+=1)for(let o=0;o<6;o+=1)if(n[o][r]===e){t.push([o,r]);break}return!!t.length&&t},m=function(e,n){return e.filter((e=>e===n)).length},p=function(r,o){const a=o===n?t:n;return 4===m(r,o)?1e3:3===m(r,o)&&1===m(r,e)?5:2===m(r,o)&&2===m(r,e)?2:3===m(r,a)&&1===m(r,e)?100:0},y=function(r,o,a,c,l){if(u(r,t))return 1e9;if(u(r,n))return-1e9;if(s(r))return 0;if(0===o)return function(e,n){let t=0;const r=function(e,n){const t=[];for(let r=0;r<6;r+=1)t.push(e[r][n]);return t}(e,e.length/2);t+=3*m(r);for(let r=0;r<6;r+=1)for(let o=0;o<4;o+=1){const a=[e[r][o],e[r][o+1],e[r][o+2],e[r][o+3]];t+=p(a,n)}for(let r=0;r<3;r+=1)for(let o=0;o<7;o+=1){const a=[e[r][o],e[r+1][o],e[r+2][o],e[r+3][o]];t+=p(a,n)}for(let r=3;r<6;r+=1)for(let o=0;o<4;o+=1){const a=[e[r][o],e[r-1][o+1],e[r-2][o+2],e[r-3][o+3]];t+=p(a,n)}for(let r=0;r<3;r+=1)for(let o=0;o<4;o+=1){const a=[e[r][o],e[r+1][o+1],e[r+2][o+2],e[r+3][o+3]];t+=p(a,n)}return t}(r,t);const d=f(r);if(l){let n=-1/0;for(const[i,u]of d)if(r[i][u]=t,n=Math.max(n,y(r,o-1,a,c,!l)),r[i][u]=e,c<=(a=Math.max(a,n)))break;return n}{let t=1/0;for(const[i,u]of d)if(r[i][u]=n,t=Math.min(t,y(r,o-1,a,c,!l)),r[i][u]=e,(c=Math.min(c,t))<=a)break;return t}},v={board:null,difficulty:null,players:{one:null,two:null},currentPlayer:null,swapPlayers(){this.currentPlayer=this.currentPlayer===o?"two":o}},_=function(){if(s(v.board))return r;return u(v.board,v.players[v.currentPlayer].token)||void 0},g=function(e){const n=document.createElement("div");n.className=`token token--${e.id} drop`;const t=document.createElement("div");t.className=`token__body token__body--${e.id}`;const r=document.createElement("p");return r.className="token__body__sign",r.textContent=e.token,t.append(r),n.append(t),n},b=function(){const e=document.querySelector(".board-wrapper");return{createBoard:function(){const n=document.createElement("div");n.className="game-board",n.style.gridTemplateColumns="repeat(7, 1fr)",n.style.gridTemplateRows="repeat(6, 1fr)";for(let e=5;e>=0;e-=1)for(let t=0;t<7;t+=1){const r=document.createElement("div");r.className="board-cell",r.dataset.rowIndex=e,r.dataset.colIndex=t,n.append(r)}e.append(n)},removeBoard:function(){const n=document.querySelector(".game-board");e.removeChild(n)},replaceCell:function(e,n,t){const r=document.querySelector(`[data-row-index="${e}"][data-col-index="${n}"]`),o=document.createElement("div");o.dataset.rowIndex=e,o.dataset.colIndex=n,o.className="board-cell",o.append(g(t)),r.replaceWith(o)},addCellClickHandler:function(e){document.querySelector(".game-board").addEventListener("click",(n=>{const t=n.target.closest(".board-cell");t&&e(t.dataset.colIndex)}))},addWinningLine:function(e){e.forEach((e=>{document.querySelector(`[data-row-index="${e[0]}"][data-col-index="${e[1]}"]`).classList.add("winner")}))}}}(),h=function(){const e=document.querySelector(".current__player__icon");return{setIcon:function(n){e.textContent=`${n}`},removeIcon:function(){e.textContent=""}}}(),w=function(){const e=document.querySelector(".overlay");return{add:function(){e.classList.remove("hidden")},remove:function(){e.classList.add("hidden")}}}(),k=function(e){document.body.append(function(e){const n=document.createElement("div");return n.className="new-game",n.innerHTML='\n      <h1 class="new-game__header">Select New Game Mode</h1>\n      <form>\n        <div class="new-game__mode">\n          <input checked type="radio" name="game-mode" id="pvp" value="pvp" />\n          <label for="pvp">Player vs Player</label>\n        </div>\n        <div class="new-game__mode">\n          <input type="radio" name="game-mode" id="easyAi" value="easy" />\n          <label for="easyAi">Player vs Easy AI</label>\n        </div>\n        <div class="new-game__mode">\n          <input type="radio" name="game-mode" id="normalAi" value="normal" />\n          <label for="normalAi">Player vs Normal AI</label>\n        </div>\n        <div class="new-game__mode">\n          <input type="radio" name="game-mode" id="hardAi" value="hard" />\n          <label for="hardAi">Player vs Hard AI</label>\n        </div>\n\n        <button class="btn new-game__btn--start" type="submit">\n          Start New Game\n        </button>\n      </form>\n    ',n.querySelector("button").addEventListener("click",(n=>{n.preventDefault();const t=document.querySelector('input[name="game-mode"]:checked');e(t.value)})),n}(e))},P=function(){document.querySelector(".new-game").remove()},C=function(){const e=document.querySelector(".logo__headings");return{add:function(){e.innerHTML='\n      <span class="logo__headings__icon"></span><br />\n      c<span class="logo__headings__icon"></span>nnect<br />\n      f<span class="logo__headings__icon"></span>ur<br />\n      <span class="logo__headings__icon"></span>\n    '}}}(),I=function(){const e=document.querySelector(".wrapper");return{add:function(n){const t=document.createElement("button");t.classList="btn new-game__btn--call",t.textContent="New Game",t.addEventListener("click",n),e.append(t)},remove:function(){const n=document.querySelector(".new-game__btn--call");e.removeChild(n)}}}(),x=function(n){return function(n,t,r){const o=function(n,t){if(n[n.length-1][t]!==e)return-1;for(let r=0;r<n.length;r+=1)if(n[r][t]===e)return r;return-1}(n,t);return-1===o?(alert("Colum full!"),!1):(function(e,n,t,r){e[n][t]=r}(n,o,t,r),u(n,o),[o,t])}(v.board,n,v.players[v.currentPlayer].token)},S=function(e,n){b.replaceCell(e,n,v.players[v.currentPlayer])},E=function(n){setTimeout((()=>{const[n,o]=function(n,r){let o,a=-1/0;const c=f(n);for(const[l,d]of c){n[l][d]=t;const c=y(n,r,-1/0,1/0,!1);n[l][d]=e,c>a&&(a=c,o=[l,d])}return o}(v.board,d[v.difficulty]);x(o),S(n,o);const a=_();return a===r?(h.setIcon(r),void w.add()):a?(w.add(),void setTimeout((()=>b.addWinningLine(a)),1250)):(v.swapPlayers(),h.setIcon(v.players[v.currentPlayer].token),void w.remove())}),1e3*n)},L=function(e){const n=x(e);if(!n)return!1;S(n[0],n[1]);const t=_();return t===r?(h.setIcon(r),void w.add()):t?(w.add(),void setTimeout((()=>b.addWinningLine(t)),1250)):(v.swapPlayers(),h.setIcon(v.players[v.currentPlayer].token),!0)},q=function(e){L(e)},A=function(e){L(e)&&(w.add(),E(1.5))},N=function(){I.remove(),b.removeBoard(),h.removeIcon(),k(M)},M=function(e){P(),w.remove(),I.add(N),function(e){(function(e){var n;v.players.one=c,v.board=function(e,n,t="--"){return Array.from({length:e},(()=>Array.from({length:n},(()=>t))))}(6,7),v.currentPlayer=Math.floor(2*Math.random())+1===1?o:"two","pvp"===e?v.players.two=l:(n=e,v.players.one=c,v.players.two=a,v.difficulty=n)})(e),h.setIcon(v.players[v.currentPlayer].token),b.createBoard(),"pvp"===e?b.addCellClickHandler(q):(b.addCellClickHandler(A),"two"===v.currentPlayer&&E(.1))}(e)};window.addEventListener("DOMContentLoaded",(()=>{C.add(),k(M)}))})();